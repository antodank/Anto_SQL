Jack

Azure

pgAdmin tool is GUI based

SQL Shell (psql) - command line tool

Connect to database from cmd

> psql -d database -U  user -W

psql must be added as env variable

shell command

\copyright  		for distribution terms
\h 					for help with SQL commands
\? 					for help with psql commands
\g 					or terminate with semicolon (;) to execute query
\q 					to quit
\l					List available databases
\c dbname			Switch connection to a new database
\dt					List available tables
\d tblname			Describe a table
\e  				opens up the Notepad text editor with the previously executed
\conninfo			get current connection info
\timing query		find execution time of query
\s filename			save command history in specified filename
\i filename			Execute command from file

------ Extentions

\dx 				list of extentions

select * FROM pg_available_extensions;

select * FROM pg_extension;

----- Create Database

CREATE DATABASE DBTest

ALTER DATABASE DBTest OWNER TO postgres;

----- Create Table

CREATE TABLE contacts(
    id INT GENERATED BY DEFAULT AS IDENTITY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(15),
    PRIMARY KEY (id)
);

------- Simple Commands
SELECT * FROM public."tblEmployee";

SELECT film_id,title FROM film ORDER BY title FETCH FIRST 5 ROW ONLY;


------- Data Types

to supoort hstore -
CREATE EXTENSION hstore;

hstore data type is used for storing key-value pairs in a single value

CREATE TABLE books (
	id serial primary key,
	title VARCHAR (255),
	attr hstore
);

INSERT INTO books (title, attr)
VALUES
	(
		'PostgreSQL Tutorial',
		'"paperback" => "243",
		"publisher" => "postgresqltutorial.com",
		"language"  => "English",
		"ISBN-13"   => "978-1449370000",
		 "weight"    => "11.2 ounces"'
	);

select data from hstore

SELECT title, attr -> 'weight' AS weight FROM books WHERE attr -> 'ISBN-13' = '978-1449370000';
	
json - stores json data 

CREATE TABLE orders (
	id serial NOT NULL PRIMARY KEY,
	info json NOT NULL
);

INSERT INTO orders (info)
VALUES('{ "customer": "John Doe", "items": {"product": "Beer","qty": 6}}');

------ pg commands - 


pg_restore -U postgres -d dbname filename+path